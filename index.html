<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sim Data 2025 - CyberPortal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- WASI LOADER STYLES --- */
        #wasi-hex-loader {
            position: fixed; inset: 0; background: #000; z-index: 100000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        .hex-container { position: relative; width: 60px; height: 60px; }
        .hexagon {
            position: absolute; width: 100%; height: 100%;
            border: 4px solid #fca311; border-radius: 10px;
            animation: hexRotate 4s infinite linear;
        }
        .hex-pulse {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 20px; height: 20px; background: #fca311; border-radius: 50%;
            animation: hexPulse 1.5s infinite ease-in-out;
        }
        @keyframes hexRotate { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} }
        @keyframes hexPulse { 0% {transform: translate(-50%,-50%) scale(1); opacity:1;} 100% {transform: translate(-50%,-50%) scale(3); opacity:0;} }
        .loader-hidden { opacity: 0; visibility: hidden; }

        /* --- MAIN APP DESIGN --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: #121212; color: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .main-container { width: 100%; max-width: 400px; background: #ffffff; border-radius: 20px; padding: 20px; text-align: center; box-shadow: 0 0 20px rgba(255, 255, 255, 0.1); position: relative; overflow: hidden; }
        .title-badge { background: #ff9f1c; color: #fff; padding: 10px 30px; border-radius: 50px; font-weight: 700; font-size: 18px; display: inline-block; margin-bottom: 30px; box-shadow: 0 4px 10px rgba(255, 159, 28, 0.4); }
        input { width: 100%; padding: 15px; border: 2px solid #eee; border-radius: 10px; font-size: 16px; outline: none; text-align: center; margin-bottom: 20px; color: #333; font-weight: 600; }
        input:focus { border-color: #0d6efd; }
        .search-btn { width: 100%; padding: 15px; background: #026c62; color: white; font-size: 18px; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.2); transition: 0.3s; }
        .search-btn:hover { background: #014f47; }
        #results { margin-top: 30px; display: none; }
        .result-header { color: #000; font-weight: bold; font-size: 20px; margin-bottom: 15px; }
        .info-card { background: #f8f9fa; border-radius: 12px; padding: 20px; text-align: left; border: 1px solid #e9ecef; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
        .info-row { display: flex; align-items: flex-start; margin-bottom: 15px; color: #333; }
        .info-row i { color: #026c62; width: 25px; font-size: 18px; margin-top: 3px; margin-right: 10px; }
        .info-row div { font-size: 14px; font-weight: 600; word-break: break-all; color: #444; }
        .info-row span { display: block; color: #222; font-weight: 700; font-size: 15px; }
        .loading-spinner { display: none; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #026c62; border-radius: 50%; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="wasi-hex-loader">
        <div class="hex-container"><div class="hexagon"></div><div class="hex-pulse"></div></div>
        <div style="color:white; margin-top: 60px; font-weight:bold; letter-spacing:2px;">LOADING SYSTEM...</div>
    </div>

    <div class="main-container">
        <div class="title-badge">Sim database 2025</div>
        <input type="number" id="numInput" placeholder="Enter CNIC or Mobile">
        <button class="search-btn" onclick="startSearch()">Search</button>
        <div class="loading-spinner" id="innerLoader"></div>

        <div id="results">
            <div class="result-header">Data found !!</div>
            <div class="info-card" id="cardContent"></div>
        </div>
    </div>

    <script>
        window.addEventListener("load", function() {
            setTimeout(() => {
                document.getElementById("wasi-hex-loader").classList.add("loader-hidden");
                setTimeout(() => { document.getElementById("wasi-hex-loader").style.display = "none"; }, 1000);
            }, 2500); 
        });

        // --- BACKUP DATA POOLS ---
        const fNames = ["Muhammad", "Ali", "Imtiaz", "Rizwan", "Sajid", "Bilal", "Usman", "Fahad", "Zahoor", "Kashif", "Ahmed", "Kamran", "Zeeshan", "Irfan", "Naveed", "Adnan", "Shahid", "Waseem", "Hamza", "Hassan", "Umer", "Yasir", "Rashid", "Javed", "Tariq", "Asim", "Farhan", "Nasir"];
        const lNames = ["Khan", "Ahmed", "Ul Haq", "Shah", "Jutt", "Butt", "Sheikh", "Gujjar", "Rana", "Malik", "Arain", "Ansari", "Qureshi", "Siddiqui", "Baig", "Mirza", "Chaudhry", "Dogar", "Cheema", "Virk", "Sandhu"];
        const cities = ["Lahore", "Karachi", "Islamabad", "Faisalabad", "Rawalpindi", "Multan", "Peshawar", "Quetta", "Sialkot", "Gujranwala", "Sargodha", "Bahawalpur", "Sukkur", "Larkana", "Sheikhupura"];
        const areas = ["Model Town", "DHA Phase", "Gulberg", "Saddar", "Cantt", "Johar Town", "Bahria Town", "Satellite Town", "Wapda Town", "Garden Town", "Defence View"];

        // --- THE TRICK: Consistent Fake Data ---
        function getConsistentFakeData(numInput) {
            let cleanNum = numInput.replace(/\D/g, ''); 
            let seed = 0;
            for(let i=0; i<cleanNum.length; i++) { seed += cleanNum.charCodeAt(i) * (i+13); }

            const fName = fNames[seed % fNames.length];
            const lName = lNames[(seed * 7) % lNames.length];
            const city = cities[(seed * 3) % cities.length];
            const area = areas[(seed * 5) % areas.length];
            const c1 = 30000 + (seed % 5000);
            const c2 = 1000000 + (seed * 999) % 8000000;
            const c3 = seed % 9;
            const fakeCnic = `${String(c1).substring(0,1)}520${c1%9}-${c2}-${c3}`;
            const hNo = (seed % 300) + 1;
            const stNo = (seed % 40) + 1;
            
            return {
                mobile: numInput, name: fName + " " + lName, cnic: fakeCnic, address: `House No ${hNo}, Street ${stNo}, ${area}, ${city}`
            };
        }

        async function startSearch() {
            const input = document.getElementById('numInput').value.trim();
            const resultsDiv = document.getElementById('results');
            const innerLoader = document.getElementById('innerLoader');
            
            if (!input || input.length < 10) {
                alert("Please enter a valid Mobile Number or CNIC!");
                return;
            }

            resultsDiv.style.display = "none";
            innerLoader.style.display = "block";

            // --- VERCEL BACKEND CALL ---
            // Hum '/api/search' ko call karenge (jo humne api/search.js banaya hai)
            const vercelApi = `/api/search?num=${input}`;

            try {
                const response = await fetch(vercelApi);
                const data = await response.json();

                // Check Real Data
                if (data && !data.error && data.status !== "error" && (data.name || data.Name || (Array.isArray(data) && data[0] && (data[0].name || data[0].Name)))) {
                    
                    let finalData = Array.isArray(data) ? data[0] : data;
                    if(!finalData.name && !finalData.Name) { throw new Error("Empty Name"); }

                    // SUCCESS: Real Data Found via Vercel Backend
                    innerLoader.style.display = "none";
                    resultsDiv.style.display = "block";
                    showData(finalData);

                } else {
                    throw new Error("No Data from Backend");
                }

            } catch (e) {
                // BACKEND FAILED -> SHOW CONSISTENT BACKUP
                console.log("Vercel API failed, showing backup.");
                setTimeout(() => {
                    const backupData = getConsistentFakeData(input);
                    innerLoader.style.display = "none";
                    resultsDiv.style.display = "block";
                    showData(backupData);
                }, 1000); 
            }
        }

        function showData(item) {
            const cardContent = document.getElementById('cardContent');
            const name = item.name || item.Name || "Unknown";
            const cnic = item.cnic || item.CNIC || "Not Available";
            const address = item.address || item.Address || "Pakistan";
            const mobile = item.mobile || item.Mobile || item.num || "Unknown";

            cardContent.innerHTML = `
                <div class="info-row"><i class="fas fa-mobile-alt"></i><div>Mobile: <span>${mobile}</span></div></div>
                <div class="info-row"><i class="fas fa-user"></i><div>Name: <span>${name}</span></div></div>
                <div class="info-row"><i class="fas fa-id-card"></i><div>CNIC: <span>${cnic}</span></div></div>
                <div class="info-row"><i class="fas fa-map-marker-alt"></i><div>Address: <span>${address}</span></div></div>
            `;
        }
    </script>
</body>
  </html>
