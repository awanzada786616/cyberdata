<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sim Data 2025 - CyberPortal</title>
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- DESIGN STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: #121212; color: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        
        .main-container {
            width: 100%; max-width: 400px; background: #ffffff; border-radius: 20px;
            padding: 20px; text-align: center; position: relative; overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .title-badge {
            background: #ff9f1c; color: #fff; padding: 10px 30px; border-radius: 50px;
            font-weight: 700; font-size: 18px; display: inline-block; margin-bottom: 30px;
            box-shadow: 0 4px 10px rgba(255, 159, 28, 0.4);
        }

        input {
            width: 100%; padding: 15px; border: 2px solid #eee; border-radius: 10px;
            font-size: 16px; outline: none; text-align: center; margin-bottom: 20px;
            color: #333; font-weight: 600;
        }
        input:focus { border-color: #0d6efd; }

        .search-btn {
            width: 100%; padding: 15px; background: #026c62; color: white;
            font-size: 18px; font-weight: bold; border: none; border-radius: 10px;
            cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.2); transition: 0.3s;
        }
        .search-btn:hover { background: #014f47; }

        #results { margin-top: 30px; display: none; }
        
        .info-card {
            background: #f8f9fa; border-radius: 12px; padding: 20px; text-align: left;
            border: 1px solid #e9ecef; box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }

        .info-row { display: flex; align-items: flex-start; margin-bottom: 15px; color: #333; }
        .info-row i { color: #026c62; width: 25px; font-size: 18px; margin-top: 3px; margin-right: 10px; }
        .info-row div { font-size: 14px; font-weight: 600; word-break: break-all; color: #444; }
        .info-row span { display: block; color: #222; font-weight: 700; font-size: 15px; }

        .loading-spinner {
            display: none; width: 40px; height: 40px; border: 4px solid #f3f3f3;
            border-top: 4px solid #026c62; border-radius: 50%;
            animation: spin 1s linear infinite; margin: 20px auto;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Loader Overlay */
        #wasi-hex-loader {
            position: fixed; inset: 0; background: #000; z-index: 100000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.8s;
        }
    </style>
</head>
<body>

    <!-- STARTUP LOADER -->
    <div id="wasi-hex-loader">
        <div style="color:#ff9f1c; font-size:40px;"><i class="fas fa-fingerprint fa-spin"></i></div>
        <div style="color:white; margin-top: 20px; font-weight:bold; letter-spacing:2px;">SECURE CONNECTION...</div>
    </div>

    <!-- MAIN APP -->
    <div class="main-container">
        <div class="title-badge">Sim database 2025</div>
        <input type="number" id="numInput" placeholder="Enter Mobile (e.g 0300...)" maxlength="11">
        <button class="search-btn" onclick="startEngine()">Search Database</button>

        <div class="loading-spinner" id="innerLoader"></div>

        <div id="results">
            <div style="color:#333; font-weight:bold; margin-bottom:10px;">Record Found!</div>
            <div class="info-card" id="cardContent"></div>
        </div>
    </div>

    <script>
        // --- 1. HIDE LOADER ON START ---
        window.addEventListener("load", () => {
            setTimeout(() => { document.getElementById("wasi-hex-loader").style.display = "none"; }, 2000);
        });

        // --- 2. DATASETS (Fixed Arrays) ---
        const firstNames = ["Muhammad", "Ali", "Kamran", "Rizwan", "Sajid", "Bilal", "Usman", "Fahad", "Zahoor", "Kashif", "Ahmed", "Irfan", "Naveed", "Adnan", "Shahid", "Waseem", "Hamza", "Hassan", "Umer", "Yasir", "Tariq", "Asim", "Farhan", "Nasir", "Sohail", "Abid", "Ameer", "Sultan", "Danish", "Faisal", "Ghulam", "Haris", "Junaid", "Zain", "Saad", "Umair"];
        const lastNames = ["Khan", "Ahmed", "Jutt", "Butt", "Sheikh", "Gujjar", "Rana", "Malik", "Arain", "Ansari", "Qureshi", "Siddiqui", "Baig", "Mirza", "Chaudhry", "Dogar", "Cheema", "Virk", "Sandhu", "Gondal", "Mughal", "Bhatti", "Khokhar", "Rajput", "Syed", "Laghari", "Niazi", "Abbasi", "Afridi"];
        const cities = ["Lahore", "Karachi", "Islamabad", "Faisalabad", "Rawalpindi", "Multan", "Peshawar", "Quetta", "Sialkot", "Gujranwala", "Sargodha", "Bahawalpur", "Sukkur", "Larkana", "Sheikhupura", "Jhelum", "Abbottabad", "Mardan", "Kasur", "Rahim Yar Khan", "Sahiwal", "Okara", "Gujrat", "Swat"];
        const areas = ["Model Town", "DHA Phase 2", "Gulberg III", "Saddar Bazar", "Cantt Area", "Johar Town", "Bahria Town", "Satellite Town", "Wapda Town", "Garden Town", "Defence View", "Gulshan-e-Iqbal", "North Nazimabad", "PECHS Block 6", "F-10 Markaz", "G-11/2", "Blue Area", "Civil Lines", "Shadman Colony", "Township Sector A"];

        // --- 3. THE "PERMANENT" MATH TRICK (Result kabhi change nahi hoga) ---
        function generatePermanentData(phoneNumber) {
            // Remove non-numbers
            let cleanNum = phoneNumber.replace(/\D/g, ''); 
            
            // Convert Phone Number to a unique "Index Number"
            // Example: 03001234567 -> hum in sab digits ko add/multiply karke aik seed banayenge
            let seed = 0;
            for(let i=0; i<cleanNum.length; i++) {
                // Har digit ko uski position se multiply kar k add karo
                seed += parseInt(cleanNum[i]) * (i + 137); 
            }

            // Ab Modulo (%) use karo. Ye ensure karta hai k result array ki length se bahir na jaye
            // Aur same 'seed' par hamesha same 'name' select ho.
            const fName = firstNames[seed % firstNames.length];
            const lName = lastNames[(seed * 7) % lastNames.length];
            const city = cities[(seed * 3) % cities.length];
            const area = areas[(seed * 5) % areas.length];

            // Generate Consistent CNIC
            // Phone number ke first 4 digit aur last 4 digits se CNIC banao
            const c1 = 30000 + (parseInt(cleanNum.substring(cleanNum.length-4)) || 1234);
            const c2 = 1000000 + (seed * 12345) % 8000000;
            const c3 = seed % 9;
            const fakeCnic = `${String(c1).substring(0,5)}-${c2}-${c3}`;

            const hNo = (seed % 200) + 1;
            const stNo = (seed % 30) + 1;

            return {
                mobile: phoneNumber,
                name: fName + " " + lName,
                cnic: fakeCnic,
                address: `House No ${hNo}, Street ${stNo}, ${area}, ${city}`
            };
        }

        // --- 4. MAIN ENGINE ---
        async function startEngine() {
            const input = document.getElementById('numInput').value.trim();
            const resultsDiv = document.getElementById('results');
            const innerLoader = document.getElementById('innerLoader');
            
            if (!input || input.length < 10) {
                alert("Please enter a valid Mobile Number!");
                return;
            }

            // UI Reset
            resultsDiv.style.display = "none";
            innerLoader.style.display = "block";

            // --- A. TRY REAL API (With Timeout) ---
            const token = "49021c666cde81315da33f1432c5322b3434cf061cf1520ec45c86cffbeb9a54"; 
            const targetApi = `https://shadowdatabase.site/api.php?token=${token}&num=${input}`;
            // AllOrigins Proxy with Cache Disable
            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(targetApi)}&disableCache=true`;

            // Timeout Promise (3 Seconds wait)
            const timeout = new Promise((_, reject) => setTimeout(() => reject("Too Slow"), 3000));

            try {
                // Race: API vs Timeout
                const response = await Promise.race([fetch(proxyUrl), timeout]);
                const wrapper = await response.json();
                
                let data = null;
                if (wrapper.contents) {
                    try { data = JSON.parse(wrapper.contents); } catch(e){}
                }

                // Check Validation
                if (data && !data.error && (data.name || data.Name || (Array.isArray(data) && data[0] && data[0].name))) {
                    // REAL DATA FOUND
                    let finalData = Array.isArray(data) ? data[0] : data;
                    if(!finalData.name && !finalData.Name) throw new Error("Empty Name");
                    
                    showCard(finalData); // Show Real
                } else {
                    throw new Error("API returned no data");
                }

            } catch (e) {
                // --- B. FALLBACK (THE TRICK) ---
                // Agar API fail ho, Proxy block ho, ya data na mile -> 
                // Use MATH CALCULATION (Consistent Data)
                
                // Thora sa delay do taake user ko lage search ho raha hai
                setTimeout(() => {
                    const fixedFakeData = generatePermanentData(input);
                    showCard(fixedFakeData); // Show Fixed Fake
                }, 1500);
            }
        }

        function showCard(item) {
            document.getElementById('innerLoader').style.display = "none";
            document.getElementById('results').style.display = "block";
            
            const name = item.name || item.Name || "Unknown";
            const cnic = item.cnic || item.CNIC || "Not Available";
            const address = item.address || item.Address || "Pakistan";
            const mobile = item.mobile || item.Mobile || item.num || "Unknown";

            document.getElementById('cardContent').innerHTML = `
                <div class="info-row"><i class="fas fa-mobile-alt"></i><div>Mobile: <span>${mobile}</span></div></div>
                <div class="info-row"><i class="fas fa-user"></i><div>Name: <span>${name}</span></div></div>
                <div class="info-row"><i class="fas fa-id-card"></i><div>CNIC: <span>${cnic}</span></div></div>
                <div class="info-row"><i class="fas fa-map-marker-alt"></i><div>Address: <span>${address}</span></div></div>
            `;
        }
    </script>
</body>
</html>
